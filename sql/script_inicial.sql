-- Criação das tabelas
CREATE TABLE CLIENTES (
    ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NOME VARCHAR(100),
    CPF_CNPJ VARCHAR(20),
    EMAIL VARCHAR(100),
    DATA_CADASTRO DATE
);

CREATE TABLE PEDIDOS (
    ID INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    ID_CLIENTE INTEGER,
    DATA_PEDIDO DATE,
    VALOR_TOTAL NUMERIC(10,2),
    STATUS VARCHAR(20),
    FOREIGN KEY (ID_CLIENTE) REFERENCES CLIENTES(ID)
);

-- Procedure para salvar pedido
SET TERM !! ;
CREATE OR ALTER PROCEDURE PRC_SALVAR_PEDIDO (
    PID_CLIENTE INTEGER,
    PDATA DATE,
    PVALOR NUMERIC(10,2),
    PSTATUS VARCHAR(20)
)
AS
BEGIN
  INSERT INTO PEDIDOS (ID_CLIENTE, DATA_PEDIDO, VALOR_TOTAL, STATUS)
  VALUES (:PID_CLIENTE, :PDATA, :PVALOR, :PSTATUS);
END !!
SET TERM ; !!

-- Trigger de log
SET TERM !! ;
CREATE OR ALTER TRIGGER TRG_PEDIDO_INSERT_LOG
AFTER INSERT ON PEDIDOS
AS
BEGIN
  -- Exemplo de log: você pode criar uma tabela de log para registrar
  -- INSERT INTO LOG_PEDIDOS (...) VALUES (...);
END !!
SET TERM ; !!